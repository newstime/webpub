#! /usr/bin/env ruby

# This signs the xml sitemap file with the provide key.

require "signer"

signer = Signer.new(File.read("example_sitemap.xml"))
signer.cert = OpenSSL::X509::Certificate.new(File.read("cert.pem"))
signer.private_key = OpenSSL::PKey::RSA.new(File.read("key.pem"))

signer.document.xpath("//a:urlset", a: "http://www.sitemaps.org/schemas/sitemap/0.9").each do |node|
  signer.digest!(node)
end

#signer.sign!(:security_token => true)

#puts signer.to_xml
